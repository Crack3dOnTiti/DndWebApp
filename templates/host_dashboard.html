<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Host Dashboard - D&D</title>
    <link rel="stylesheet" href="/static/css/host_dashboard.css">
</head>
<body>
    <div class="container">
        <!-- Side Menu -->
        <div class="side-menu">
            <div class="menu-item active" data-section="dash">Dash</div>
            <div class="menu-item" data-section="create">Create</div>
        </div>

        <!-- Top Right Section -->
        <div class="chat-input-section">
            <!-- topright -->
        </div>

        <!-- Chat Messages Section -->
        <div class="chat-messages-section" id="chatMessages">
            <div class="player-checkboxes" id="playerCheckboxes">
                <!-- Player checkboxes will be populated here -->
            </div>
        </div>

        <!-- Main Content (4 sections) -->
        <div class="main-content">
            <!-- Bottom Left: Sliders -->
            <div class="content-section sliders-section">
                <div class="section-title">Environmental Controls</div>
                
                <div class="slider-container">
                    <label class="slider-label">Saturation</label>
                    <input type="range" class="slider" id="saturationSlider" min="0" max="4" value="0" oninput="updateSliderValue('saturation', this.value)">
                    <div class="slider-value" id="saturationValue">Full</div>
                </div>

                <div class="slider-container">
                    <label class="slider-label">General Feeling</label>
                    <input type="range" class="slider" id="feelingSlider" min="0" max="4" value="2" oninput="updateSliderValue('feeling', this.value)">
                    <div class="slider-value" id="feelingValue">Good</div>
                </div>

                <div class="slider-container">
                    <label class="slider-label">Temperature</label>
                    <input type="range" class="slider" id="temperatureSlider" min="0" max="4" value="2" oninput="updateSliderValue('temperature', this.value)">
                    <div class="slider-value" id="temperatureValue">Normal</div>
                </div>
            </div>

            <!-- Reserved Section 1 - Combat Manager -->
            <div class="content-section">
                <div class="section-title">Combat Manager</div>
                <div style="display: flex; justify-content: center; align-items: center; height: 80%;">
                    <button class="save-btn" onclick="openCombatManager()" style="padding: 20px 40px; font-size: 1.1rem;">Combat Manager</button>
                </div>
            </div>
            <!-- Reserved Section 2 & 3 - Host Dice (Merged) -->
            <div class="dice-merged-section" style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                <div class="section-title">Host Dice</div>
                
                <select id="hostDiceType" style="width: 200px; padding: 12px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0; margin-bottom: 20px; font-size: 1rem;">
                    <option value="5">D5</option>
                    <option value="10">D10</option>
                    <option value="20" selected>D20</option>
                    <option value="100">D100</option>
                </select>
                
                <button onclick="rollHostDice()" style="width: 200px; padding: 15px; background: #444; border: none; border-radius: 4px; color: #e0e0e0; cursor: pointer; margin-bottom: 20px; font-size: 1.1rem;">Roll Dice</button>
                
                <div id="hostDiceResult" style="width: 200px; height: 120px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 3rem; font-weight: 700;">-</div>
            </div>
        </div>

        <!-- Right Side: Players, Enemies, Dice -->
        <div class="right-side">
            <!-- Players Section -->
            <div class="players-section">
                <div class="section-title">Players</div>
                <div id="playersList">
                    <!-- Player cards will be populated here -->
                </div>
            </div>

            <!-- Enemies Section -->
            <div class="enemies-section">
                <div class="section-title">Enemies</div>
                <div id="enemiesList">
                    <!-- Enemy cards will be populated here -->
                </div>
            </div>

            <!-- Messaging Section -->
            <div class="enemies-section">
                <div class="section-title">Messages</div>
                
                <!-- Message display area -->
                <div style="background: #333; border-radius: 4px; height: 60%; margin-bottom: 10px; padding: 10px; overflow-y: auto; border: 1px solid #444;" id="messageDisplay">
                    <div style="font-size: 0.8rem; color: #999; font-style: italic;">Messages will appear here...</div>
                </div>
                
                <!-- Message input area -->
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <div style="display: flex; gap: 8px;">
                        <input type="text" placeholder="Type message..." id="chatInputBottom" style="flex: 1; padding: 6px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0; font-size: 0.9rem;">
                        <button onclick="sendMessage()" style="padding: 6px 12px; background: #444; border: none; border-radius: 4px; color: #e0e0e0; cursor: pointer; font-size: 0.9rem;">Send</button>
                    </div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <select id="voiceModeBottom" style="padding: 4px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0; font-size: 0.8rem;">
                            <option value="host">Host</option>
                            <option value="voice">Voice</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Combat Manager Modal -->
    <div id="combatModal" class="modal">
        <div class="modal-content" style="max-width: 800px; height: 80vh;">
            <div class="modal-header">
                <span style="float: left;">Combat Manager</span>
                <span style="float: right; cursor: pointer; font-size: 1.5rem;" onclick="closeCombatManager()">&times;</span>
                <div style="clear: both;"></div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr 300px; height: calc(100% - 60px); gap: 15px;">
                <!-- Players Section -->
                <div style="display: flex; flex-direction: column;">
                    <h3 style="color: #ccc; margin-bottom: 10px; text-align: center;">Players</h3>
                    <div id="combatPlayersList" style="flex: 1; overflow-y: auto; background: #333; border-radius: 4px; padding: 10px;">
                        <!-- Combat player cards will be populated here -->
                    </div>
                </div>
                
                <!-- Enemies Section -->
                <div style="display: flex; flex-direction: column;">
                    <h3 style="color: #ccc; margin-bottom: 10px; text-align: center;">Enemies</h3>
                    <div id="combatEnemiesList" style="flex: 1; overflow-y: auto; background: #333; border-radius: 4px; padding: 10px;">
                        <!-- Combat enemy cards will be populated here -->
                    </div>
                </div>
                
                <!-- Dice Section -->
                <div style="display: flex; flex-direction: column; align-items: center; background: #333; border-radius: 4px; padding: 20px;">
                    <h3 style="color: #ccc; margin-bottom: 20px;">Combat Dice</h3>
                    
                    <select id="combatDiceType" style="width: 80%; padding: 8px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; color: #e0e0e0; margin-bottom: 15px;">
                        <option value="5">D5</option>
                        <option value="10">D10</option>
                        <option value="20" selected>D20</option>
                        <option value="100">D100</option>
                    </select>
                    
                    <button onclick="rollCombatDice()" style="width: 80%; padding: 12px; background: #444; border: none; border-radius: 4px; color: #e0e0e0; cursor: pointer; margin-bottom: 15px;">Roll Dice</button>
                    
                    <div id="combatDiceResult" style="width: 80%; height: 80px; background: #1a1a1a; border: 1px solid #444; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; font-weight: 700;">-</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Player Edit Modal -->
    <div id="playerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header" id="modalTitle">Edit Player</div>
            <form id="playerForm">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-input" id="editName">
                </div>
                <div class="form-group">
                    <label class="form-label">Current HP</label>
                    <input type="number" class="form-input" id="editCurrentHP" step="0.1">
                </div>
                <div class="form-group">
                    <label class="form-label">Max HP</label>
                    <input type="number" class="form-input" id="editMaxHP" step="0.1">
                </div>
                <div class="form-group">
                    <label class="form-label">Current Stamina</label>
                    <input type="number" class="form-input" id="editCurrentStam" step="0.1">
                </div>
                <div class="form-group">
                    <label class="form-label">Max Stamina</label>
                    <input type="number" class="form-input" id="editMaxStam" step="0.1">
                </div>
                <div class="form-group">
                    <label class="form-label">Skill Description</label>
                    <textarea class="form-textarea" id="editSkillDesc"></textarea>
                </div>
                <button type="button" class="save-btn" onclick="savePlayerChanges()">Save Changes</button>
            </form>
        </div>
    </div>

    <script src="/static/js/host_dashboard.js"></script>
</body>
</html>