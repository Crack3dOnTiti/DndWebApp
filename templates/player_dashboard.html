<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interface Joueur - D&D</title>
    <link rel="stylesheet" href="/static/css/player_dashboard.css">
</head>
<body>
    <div id="loading" class="loading">
        Chargement des données du personnage...
    </div>

    <div id="dashboard" class="container" style="display: none;">
        <!-- Chat Section -->
        <div class="chat-section">
            <div class="chat-content">
                <div class="chat-messages" id="chatMessages">
                    <div style="font-size: 0.8rem; color: #999; font-style: italic;">Les messages apparaîtront ici...</div>
                </div>
                <div class="chat-input-area">
                    <textarea class="chat-input" id="chatInput" placeholder="Tapez votre message..."></textarea>
                    <div class="chat-controls">
                        <button class="send-btn" onclick="sendMessage()">Envoyer</button>
                        <select class="voice-dropdown" id="voiceMode">
                            <option value="host">Hôte</option>
                            <option value="mystery">???</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content - 3 Column Layout -->
        <div class="main-content">
            <!-- Left Column - Character Information -->
            <div class="character-info-column">
                <div class="character-header">
                    <div class="character-name" id="characterName"></div>
                    <div class="character-title" id="characterTitle"></div>
                </div>

                <!-- Health Bars -->
                <div class="health-section">
                    <div class="health-title">Santé</div>
                    <div class="health-bar-container">
                        <div class="health-label">
                            <span>Points de Vie</span>
                            <span id="hpValue"></span>
                        </div>
                        <div class="hp-bar">
                            <div class="hp-fill" id="hpFill"></div>
                        </div>
                    </div>
                    <div class="health-bar-container">
                        <div class="health-label">
                            <span>Endurance</span>
                            <span id="staminaValue"></span>
                        </div>
                        <div class="stamina-bar">
                            <div class="stamina-fill" id="staminaFill"></div>
                        </div>
                    </div>
                </div>

                <!-- Character Information -->
                <div class="info-section">
                    <div class="info-title">Informations du Personnage</div>
                    <div class="info-list">
                        <div class="info-item">
                            <span class="info-label">Âge</span>
                            <span class="info-value" id="age"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Biologie</span>
                            <span class="info-value" id="biology"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Sentiment Général</span>
                            <span class="info-value" id="feeling"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Température</span>
                            <span class="info-value" id="temperature"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Satiété</span>
                            <span class="info-value" id="saturation"></span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Nom du Pouvoir</span>
                            <span class="info-value" id="powerName"></span>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button class="details-btn" onclick="openPlayerDetails()" style="flex: 1;">
                            Voir Détails
                        </button>
                        <button class="details-btn" onclick="savePlayerData()" style="flex: 1;">
                            Sauvegarder
                        </button>
                    </div>
                </div>
            </div>

            <!-- Middle Column - Empty for now -->
            <div class="middle-column">
                Zone réservée - TODO
            </div>

            <!-- Right Column - Dice and Abilities -->
            <div class="right-column">
                <!-- Dice Section -->
                <div class="dice-section">
                    <div class="dice-title">Lancers de Dés</div>
                    <div class="dice-controls">
                        <select class="dice-dropdown" id="diceType">
                            <option value="5">Dé 5</option>
                            <option value="10">Dé 10</option>
                            <option value="20" selected>Dé 20</option>
                            <option value="100">Dé 100</option>
                        </select>
                        <button class="dice-button" onclick="rollDice()">Lancer le Dé</button>
                        <div class="dice-result" id="diceResult">-</div>
                    </div>
                </div>

                <!-- Abilities Section -->
                <div class="abilities-section">
                    <div class="abilities-title">
                        <span>Liste des Capacités</span>
                        <button class="create-btn" onclick="openAbilityCreator()">Créer</button>
                    </div>
                    <div style="color: #999; font-style: italic; text-align: center; margin-top: 20px;">
                        TODO - À implémenter
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Player Details Modal -->
    <div id="playerDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span>Détails Complets du Personnage</span>
                <span class="close-btn" onclick="closePlayerDetails()">&times;</span>
            </div>
            
            <div class="modal-grid">
                <!-- Basic Information -->
                <div class="modal-section">
                    <div class="modal-section-title">Informations de Base</div>
                    <div class="modal-field">
                        <span class="modal-field-label">Nom</span>
                        <span class="modal-field-value" id="detailName"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Titre</span>
                        <span class="modal-field-value" id="detailTitle"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Âge</span>
                        <span class="modal-field-value" id="detailAge"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Genre</span>
                        <span class="modal-field-value" id="detailGender"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Biologie</span>
                        <span class="modal-field-value" id="detailBiology"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Origine</span>
                        <span class="modal-field-value" id="detailBackground"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Style Principal</span>
                        <span class="modal-field-value" id="detailMainStyle"></span>
                    </div>
                </div>

                <!-- Health & Status -->
                <div class="modal-section">
                    <div class="modal-section-title">Santé & État</div>
                    <div class="modal-field">
                        <span class="modal-field-label">Points de Vie</span>
                        <span class="modal-field-value" id="detailHp"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Endurance</span>
                        <span class="modal-field-value" id="detailStamina"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Sentiment Général</span>
                        <span class="modal-field-value" id="detailFeeling"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Température</span>
                        <span class="modal-field-value" id="detailTemperature"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Satiété</span>
                        <span class="modal-field-value" id="detailSaturation"></span>
                    </div>
                </div>

                <!-- Character Traits -->
                <div class="modal-section">
                    <div class="modal-section-title">Traits de Caractère</div>
                    <div class="modal-field">
                        <span class="modal-field-label">Péché</span>
                        <span class="modal-field-value" id="detailSin"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Vertu</span>
                        <span class="modal-field-value" id="detailVirtue"></span>
                    </div>
                </div>

                <!-- Dice Rolls -->
                <div class="modal-section">
                    <div class="modal-section-title">Derniers Lancers</div>
                    <div class="modal-field">
                        <span class="modal-field-label">Dé 5</span>
                        <span class="modal-field-value" id="detailD5"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Dé 10</span>
                        <span class="modal-field-value" id="detailD10"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Dé 20</span>
                        <span class="modal-field-value" id="detailD20"></span>
                    </div>
                    <div class="modal-field">
                        <span class="modal-field-label">Dé 100</span>
                        <span class="modal-field-value" id="detailD100"></span>
                    </div>
                </div>

                <!-- Skills -->
                <div class="modal-section" style="grid-column: 1 / -1;">
                    <div class="modal-section-title">Compétences & Pouvoirs</div>
                    <div class="modal-field">
                        <span class="modal-field-label">Nom du Pouvoir Actif</span>
                        <span class="modal-field-value" id="detailSkillName"></span>
                    </div>
                    <div class="description-field" id="detailSkillDescription"></div>
                    
                    <div class="modal-field" style="margin-top: 15px;">
                        <span class="modal-field-label">Nom du Pouvoir Passif</span>
                        <span class="modal-field-value" id="detailPassiveName"></span>
                    </div>
                    <div class="description-field" id="detailPassiveDescription"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="error" class="error" style="display: none;">
        Erreur lors du chargement des données du personnage.
    </div>

    <script src="/static/js/player_dashboard.js"></script>
</body>
</html>